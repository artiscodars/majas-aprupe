<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Task Management</title>

    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/css/select2.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.min.css" />
  </head>

  <body>
    <div class="dropdown text-center p-3 bg-dark">
      <button
        class="btn btn-secondary dropdown-toggle"
        type="button"
        id="dropdownMenuButton"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        Pārslēgt sagatavi
      </button>
      <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
        <li>
          <a class="dropdown-item" href="statistika-sakums.html"
            >Statistika - sākums</a
          >
        </li>
        <li><a class="dropdown-item" href="statistika.html">Statistika</a></li>
        <li><a class="dropdown-item" href="index.html">Uzdevumi</a></li>
      </ul>
    </div>

    <div class="custom-navbar d-flex justify-content-start mb-3 bg-white p-3">
      <div class="container">
        <a href="statistika-sakums.html" class="btn btn-outline-secondary">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="1em"
            height="1em"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M13 9V3h8v6zM3 13V3h8v10zm10 8V11h8v10zM3 21v-6h8v6z"
            />
          </svg>
        </a>
        <a href="statistika.html" class="btn btn-primary">DARBINIEKI</a>
        <button class="btn btn-outline-secondary">KLIENTI</button>
        <button class="btn btn-outline-secondary">DOKUMENTI</button>
        <button class="btn btn-outline-secondary">KVALITĀTE</button>
      </div>
    </div>

    <div class="container">
      <div class="row filtri">
        <div class="col-4">
          <label for="exampleInputEmail1" class="form-label d-block"
            >Struktūrvienības</label
          >

          <select
            class="js-select2 form-select departments"
            multiple="multiple"
          >
            <option value="a" data-badge>Administrācija</option>
            <option value="b" data-badge>Aprūpe</option>
            <option value="c" data-badge>Tehniskais dienests</option>
          </select>
        </div>
        <div class="col-auto">
          <label for="exampleInputEmail1" class="form-label d-block"
            >Perioda veids</label
          >
          <div>
            <div class="form-check form-check-inline pt-1">
              <input
                class="form-check-input"
                type="radio"
                name="inlineRadioOptions"
                id="inlineRadio1"
                value="option1"
                selected
              />
              <label class="form-check-label" for="inlineRadio1">Gadi</label>
            </div>
            <div class="form-check form-check-inline">
              <input
                class="form-check-input"
                type="radio"
                name="inlineRadioOptions"
                id="inlineRadio2"
                value="option2"
              />
              <label class="form-check-label" for="inlineRadio2">Mēneši</label>
            </div>
          </div>
        </div>
        <div class="col-4">
          <label for="exampleInputEmail1" class="form-label d-block"
            >Gadi</label
          >

          <select class="js-select2 form-select years" multiple="multiple">
            <option value="2024" data-badge>2024</option>
            <option value="2023" data-badge>2023</option>
            <option value="2022" data-badge>2022</option>
          </select>
        </div>
      </div>
    </div>

    <div class="container mt-4">
      <div class="row mb-5">
        <div class="col-auto">
          <div class="card number">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes plus">+3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
        <div class="col-auto">
          <div class="card number bg-primary">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes minus">-3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
        <div class="col-auto">
          <div class="card number">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes plus">+3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
        <div class="col-auto">
          <div class="card number">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes minus">-3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
        <div class="col-auto">
          <div class="card number">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes plus">+3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
        <div class="col-auto">
          <div class="card number">
            <div class="card-body">
              <div class="value">
                23
                <div class="changes minus">-3</div>
              </div>
              <div class="label">Darbinieki kopā</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container mt-4">
      <div class="card">
        <div class="card-body">
          <div class="filters">
            <div class="row">
              <div class="col">
                <form class="row g-3">
                  <div class="col-auto">
                    <select
                      class="form-select selected"
                      aria-label="Default select example"
                    >
                      <option value="0">Par gadu</option>
                      <option value="1" selected>Par mēnešiem</option>
                    </select>
                  </div>
                  <div class="col-auto">
                    <div class="form-check form-check-inline pt-2">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="inlineCheckbox1"
                        value="option1"
                        checked
                      />
                      <label class="form-check-label" for="inlineCheckbox1"
                        >Rādīt struktūrvienības</label
                      >
                    </div>
                  </div>
                </form>
              </div>
              <div class="col">
                <div class="chart-switch text-end">
                  <button
                    class="btn btn-primary switch-chart"
                    id="showColumnChart"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="1.34em"
                      height="1em"
                      viewBox="0 0 32 24"
                    >
                      <path
                        fill="currentColor"
                        d="M10 12v8H6v-8zm6-8v16h-4V4zm16 18v2H0V0h2v22zM22 8v12h-4V8zm6-6v18h-4V2z"
                      />
                    </svg>
                  </button>
                  <button
                    class="btn btn-outline-secondary switch-chart"
                    id="showLineChart"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      width="1em"
                      height="1em"
                      viewBox="0 0 256 256"
                    >
                      <path
                        fill="currentColor"
                        d="M232 208a8 8 0 0 1-8 8H32a8 8 0 0 1-8-8V48a8 8 0 0 1 16 0v94.37L90.73 98a8 8 0 0 1 10.07-.38l58.81 44.11L218.73 90a8 8 0 1 1 10.54 12l-64 56a8 8 0 0 1-10.07.38l-58.81-44.09L40 163.63V200h184a8 8 0 0 1 8 8"
                      />
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div id="chartContainer" style="height: 500px; width: 100%"></div>
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.4/js/select2.min.js"></script>
    <script>
      (function ($) {
        "use strict";

        // Initialize select2
        $(".years").select2({
          closeOnSelect: false,
          placeholder: "Izvēlies gadus",
          allowHtml: true,
          allowClear: true,
          tags: true,
        });

        $(".departments").select2({
          closeOnSelect: false,
          placeholder: "Izvēlies struktūrvienības",
          allowHtml: true,
          allowClear: true,
          tags: true,
        });

        // Check for active state when value is selected
        function checkSelectActive(selectElement) {
          const nextElement = $(selectElement).next(".select2-container");

          if ($(selectElement).val().length > 0) {
            nextElement.addClass("active");
          } else {
            nextElement.removeClass("active");
          }
        }

        // Apply check on change for each select
        $(".js-select2").on("change", function () {
          checkSelectActive(this);
        });

        // Initial check for any pre-selected values
        $(".js-select2").each(function () {
          checkSelectActive(this);
        });

        function iformat(icon, badge) {
          var originalOption = icon.element;
          var originalOptionBadge = $(originalOption).data("badge");

          return $(
            '<span><i class="fa ' +
              $(originalOption).data("icon") +
              '"></i> ' +
              icon.text +
              '<span class="badge">' +
              originalOptionBadge +
              "</span></span>"
          );
        }
      })(jQuery);
    </script>

    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script type="text/javascript">
      // Load the Google Charts library
      google.charts.load("current", { packages: ["corechart"] });

      // Set a callback to run when the Google Charts library is loaded
      google.charts.setOnLoadCallback(drawColumnChart);

      // Chart options
      var columnChartOptions = {
        hAxis: {
          slantedText: true,
          slantedTextAngle: 45,
        },
        vAxis: { title: "Skaits" },
        legend: { position: "bottom" },
        colors: ["#1995ca", "#d95f02"],
        annotations: {
          alwaysOutside: true,
          textStyle: {
            fontSize: 12,
            color: "#000",
            auraColor: "none",
          },
          stem: {
            length: 0,
          },
        },
      };

      var lineChartOptions = {
        hAxis: {
          slantedText: true,
          slantedTextAngle: 45,
        },
        vAxis: { title: "Skaits" },
        legend: { position: "bottom" },
        colors: ["#1995ca", "#d95f02"],
        pointSize: 5,
        annotations: {
          alwaysOutside: true,
          textStyle: {
            fontSize: 12,
            color: "#000",
            auraColor: "none",
          },
          stem: {
            length: 0,
          },
        },
      };

      // Function to create and initialize the data table
      function initializeData() {
        var data = google.visualization.arrayToDataTable([
          ["Month", "Administrācija", "Aprūpe"],
          ["Janvāris", 10, 40],
          ["Februāris", 11, 46],
          ["Marts", 6, 112],
          ["Aprīlis", 10, 54],
          ["Maijs", 12, 60],
          ["Jūnijs", 9, 50],
          ["Jūlijs", 8, 40],
          ["Augusts", 12, 60],
          ["Septembris", 10, 50],
          ["Oktobris", 9, 70],
          ["Novembris", 12, 90],
          ["Decembris", 14, 85],
        ]);

        return data;
      }

      // Function to create a DataView with annotations
      function createDataView(data) {
        var view = new google.visualization.DataView(data);
        view.setColumns([
          0,
          1,
          {
            calc: "stringify",
            sourceColumn: 1,
            type: "string",
            role: "annotation",
          },
          2,
          {
            calc: "stringify",
            sourceColumn: 2,
            type: "string",
            role: "annotation",
          },
        ]);
        return view;
      }

      // Function to draw the column chart
      function drawColumnChart() {
        var data = initializeData();
        var view = createDataView(data);
        var chart = new google.visualization.ColumnChart(
          document.getElementById("chartContainer")
        );
        chart.draw(view, columnChartOptions);

        // Set active button style
        setActiveButton("showColumnChart");
      }

      // Function to draw the line chart
      function drawLineChart() {
        var data = initializeData();
        var view = createDataView(data);
        var chart = new google.visualization.LineChart(
          document.getElementById("chartContainer")
        );
        chart.draw(view, lineChartOptions);

        // Set active button style
        setActiveButton("showLineChart");
      }

      // Function to toggle button styles
      function setActiveButton(activeButtonId) {
        var columnButton = document.getElementById("showColumnChart");
        var lineButton = document.getElementById("showLineChart");

        if (activeButtonId === "showColumnChart") {
          columnButton.classList.remove("btn-outline-secondary");
          columnButton.classList.add("btn-primary");
          lineButton.classList.remove("btn-primary");
          lineButton.classList.add("btn-outline-secondary");
        } else if (activeButtonId === "showLineChart") {
          lineButton.classList.remove("btn-outline-secondary");
          lineButton.classList.add("btn-primary");
          columnButton.classList.remove("btn-primary");
          columnButton.classList.add("btn-outline-secondary");
        }
      }

      // Event listeners for the buttons to switch charts
      document
        .getElementById("showColumnChart")
        .addEventListener("click", function () {
          drawColumnChart();
        });

      document
        .getElementById("showLineChart")
        .addEventListener("click", function () {
          drawLineChart();
        });
    </script>
  </body>
</html>
